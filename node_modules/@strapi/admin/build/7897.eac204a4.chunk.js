"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[7897],{4468:function(U,g,t){t.d(g,{I:function(){return e},U:function(){return n}});const e="strapi_stage",n="strapi_assignee"},8291:function(U,g,t){t.r(g),t.d(g,{InformationBoxEE:function(){return ee}});var e=t(32735),n=t(45509),i=t(98865),E=t(87107),o=t(87933),v=t(21428),u=t(49372),c=t(23866),T=t(90333),S=t(67879),d=t(20108),O=t(15062),A=t(69997),W=t(97108),N=t(30305),a=t(4468);function F(){const{initialData:m,layout:{uid:p},isSingleType:I,onChange:B}=(0,n.Wq)(),x=(0,O.v9)(N._),{formatMessage:r}=(0,S.Z)(),{formatAPIError:K}=(0,n.So)(),C=(0,n.lm)(),{put:$}=(0,n.kY)(),{allowedActions:{canReadUsers:w}}=(0,n.ss)({readUsers:x.settings.users.read}),{users:D,isLoading:P,isError:Y}=(0,W.R)({},{enabled:w}),L=m?.[a.U]??null,M=async({value:l})=>{y.mutate({entityId:m.id,assigneeId:parseInt(l,10),uid:p})},y=(0,d.useMutation)(async({entityId:l,assigneeId:Z,uid:X})=>{const J=I?"single-types":"collection-types",{data:{data:f}}=await $(`/admin/content-manager/${J}/${X}/${l}/assignee`,{data:{id:Z}});return B({target:{name:a.U,value:f[a.U]}},!0),f},{onSuccess(){C({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return e.createElement(E.g,{name:a.U,id:a.U},e.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(v.hQ,{clearLabel:r({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:Y&&w&&r({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||y.error&&K(y.error),disabled:!P&&D.length===0,name:a.U,id:a.U,value:L?L.id:null,onChange:l=>M({value:l}),onClear:()=>M({value:null}),placeholder:r({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:r({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),customizeContent:()=>e.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},e.createElement(u.Z,{textColor:"neutral800",ellipsis:!0},L?(0,A.Gf)(L,r):null),P||y.isLoading?e.createElement(c.a,{small:!0,style:{display:"flex"}}):null)},D.map(l=>e.createElement(T.O,{key:l.id,value:l.id,textValue:(0,A.Gf)(l,r)},(0,A.Gf)(l,r))))))}var R=t(77035),k=t(67014),G=t(47851),b=t(98866),h=t(90562),s=t(2121);function z({id:m,layout:p}={},I={}){const{kind:B,uid:x}=p,r=B==="collectionType"?"collection-types":"single-types",{get:K}=(0,n.kY)(),{data:C,isLoading:$,refetch:w}=(0,d.useQuery)(["content-manager",r,p.uid,m,"stages"],async()=>{const{data:Y}=await K(`/admin/content-manager/${r}/${x}/${m}/stages`);return Y},I),D=e.useMemo(()=>C?.meta??{},[C?.meta]),P=e.useMemo(()=>C?.data??[],[C?.data]);return{meta:D,stages:P,isLoading:$,refetch:w}}var H=t(68886);function V(){const{initialData:m,layout:p,isSingleType:I,onChange:B}=(0,n.Wq)(),{put:x}=(0,n.kY)(),{formatMessage:r}=(0,S.Z)(),{formatAPIError:K}=(0,n.So)(),C=(0,n.lm)(),{meta:$,stages:w,isLoading:D,refetch:P}=z({id:m.id,layout:p},{enabled:!!m?.id}),{getFeature:Y}=(0,b.q)(),[L,M]=e.useState(!1),y=Y("review-workflows"),l=m?.[a.I]??null,Z=(0,d.useMutation)(async({entityId:f,stageId:j,uid:Q})=>{const q=I?"single-types":"collection-types",{data:{data:_}}=await x(`/admin/content-manager/${q}/${Q}/${f}/stage`,{data:{id:j}});return B({target:{name:a.I,value:_[a.I]}},!0),await P(),_},{onSuccess(){C({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),X=async({value:f})=>{try{y?.[s.Ef]&&parseInt(y[s.Ef],10)<$.workflowCount?M("workflow"):y?.[s._X]&&parseInt(y[s._X],10)<w.length?M("stage"):Z.mutateAsync({entityId:m.id,stageId:f,uid:p.uid})}catch{}},{themeColorName:J}=l?.color?(0,H.k)(l?.color):{};return e.createElement(e.Fragment,null,e.createElement(E.g,{hint:w.length===0&&r({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:a.I,id:a.I},e.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(R.q4,{disabled:w.length===0,error:Z.error&&K(Z.error)||null,name:a.I,id:a.I,value:l?.id,onChange:f=>X({value:f}),label:r({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:l&&e.createElement(o.k,{as:"span",height:2,background:l?.color,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>e.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},e.createElement(u.Z,{textColor:"neutral800",ellipsis:!0},l?.name??""),D?e.createElement(c.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null)},w.map(({id:f,color:j,name:Q})=>{const{themeColorName:q}=(0,H.k)(j);return e.createElement(R.ag,{key:f,startIcon:e.createElement(o.k,{height:2,background:j,borderColor:q==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:f,textValue:Q},Q)})),e.createElement(k.J,null),e.createElement(G.c,null))),e.createElement(h.fC,{isOpen:L==="workflow",onClose:()=>M(!1)},e.createElement(h.Dx,null,r({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(h.uT,null,r({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),e.createElement(h.fC,{isOpen:L==="stage",onClose:()=>M(!1)},e.createElement(h.Dx,null,r({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),e.createElement(h.uT,null,r({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function ee(){const{isCreatingEntry:m,layout:{options:p}}=(0,n.Wq)(),I=p?.reviewWorkflows??!1;return e.createElement(i.d.Root,null,e.createElement(i.d.Title,null),I&&!m&&e.createElement(e.Fragment,null,e.createElement(V,null),e.createElement(F,null)),e.createElement(i.d.Body,null))}},98866:function(U,g,t){t.d(g,{q:function(){return E}});var e=t(32735),n=t(45509),i=t(20108);function E({enabled:o}={enabled:!0}){const{get:v}=(0,n.kY)(),{data:u,isError:c,isLoading:T}=(0,i.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:O}}=await v("/admin/license-limit-information");return O},{enabled:o}),S=e.useMemo(()=>u??{},[u]),d=e.useCallback(O=>(S?.features??[]).find(W=>W.name===O)?.options??{},[S?.features]);return{license:S,getFeature:d,isError:c,isLoading:T}}},90562:function(U,g,t){t.d(g,{uT:function(){return k},fC:function(){return h},Dx:function(){return R}});var e=t(32735),n=t(49372),i=t(87933),E=t(85025),o=t(31600),v=t(72850),u=t(50563),c=t(95489),T=t(35331),S=t(60216),d=t.n(S),O=t(67879),A=t(8471),W=t.p+"0cd5f8915b265d5b1856.png";const N="limits-title",a="https://strapi.io/pricing-cloud",F="https://strapi.io/contact-sales";function R({children:s}){return e.createElement(n.Z,{variant:"alpha",id:N},s)}R.propTypes={children:d().node.isRequired};function k({children:s}){return e.createElement(n.Z,{variant:"omega"},s)}k.propTypes={children:d().node.isRequired};function G(){const{formatMessage:s}=(0,O.Z)();return e.createElement(i.k,{gap:2,paddingTop:4},e.createElement(c.Q,{variant:"default",isExternal:!0,href:a},s({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(c.Q,{variant:"tertiary",isExternal:!0,href:F},s({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const b=A.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:s})=>`-${s.spaces[7]}`};
  margin-top: ${({theme:s})=>`-${s.spaces[7]}`};
  width: 360px;
`;function h({children:s,isOpen:z,onClose:H}){const{formatMessage:V}=(0,O.Z)();return z?e.createElement(E.P,{labelledBy:N},e.createElement(o.f,null,e.createElement(i.k,{gap:2,paddingLeft:7,position:"relative"},e.createElement(i.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},s,e.createElement(G,null)),e.createElement(i.k,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(b,{src:W,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(v.x,{display:"flex",position:"absolute",right:0,top:0},e.createElement(u.h,{icon:e.createElement(T.Z,null),"aria-label":V({id:"global.close",defaultMessage:"Close"}),onClick:H})))))):null}h.defaultProps={isOpen:!1},h.propTypes={children:d().node.isRequired,isOpen:d().bool,onClose:d().func.isRequired}},2121:function(U,g,t){t.d(g,{$k:function(){return W},Ef:function(){return k},FT:function(){return F},Nj:function(){return O},Ot:function(){return S},QM:function(){return c},VS:function(){return N},_X:function(){return G},bc:function(){return d},gu:function(){return i},k_:function(){return A},lv:function(){return a},qZ:function(){return u},rg:function(){return o},sN:function(){return n},uL:function(){return R},x4:function(){return T},yq:function(){return E},zn:function(){return v}});var e=t(12301);const n="settings_review-workflows",i="Settings/Review_Workflows/RESET_WORKFLOW",E="Settings/Review_Workflows/SET_CONTENT_TYPES",o="Settings/Review_Workflows/SET_IS_LOADING",v="Settings/Review_Workflows/SET_ROLES",u="Settings/Review_Workflows/SET_WORKFLOW",c="Settings/Review_Workflows/SET_WORKFLOWS",T="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",S="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",d="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",O="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",A="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",W="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",N="Settings/Review_Workflows/WORKFLOW_UPDATE",a={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},F=e.W.colors.primary600,R={STAGE:"stage"},k="numberOfWorkflows",G="stagesPerWorkflow"},68886:function(U,g,t){t.d(g,{k:function(){return i},s:function(){return E}});var e=t(12301),n=t(2121);function i(o){if(!o)return null;const u=Object.entries(e.W.colors).filter(([,c])=>c.toUpperCase()===o.toUpperCase()).reduce((c,[T])=>(n.lv?.[T]&&(c=T),c),null);return u?{themeColorName:u,name:n.lv[u]}:null}function E(){return Object.entries(n.lv).map(([o,v])=>({hex:e.W.colors[o].toUpperCase(),name:v}))}}}]);
